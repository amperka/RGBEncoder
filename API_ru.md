# RGBEncoder API (RUS)

## `class RGBEncoder`

Создайте объект типа `RGBEncoder` для работы с многофункциональным модулем [RGBEncoder](https://my.amperka.com/modules/RGBEncoder).
Модуль представляет собой энкодер вращения, кнопку (при нажатии на вал энкодера) с RGB подсветкой вала энкодера. Для кнопки и энкодера имеется два интерфейса: прямой доступ и псевдо-асинхронный.

### `RGBEncoder(uint8_t i2cAddress = 42)`

Создает новый объект `RGBEncoder`, использующий аппаратный i2c.

- `i2cAddress`: адрес устройства на шине i2c. При вызове без параметра, его значение подразумевается равным 42.


### `void begin()`
### `void begin(TwoWire* wire)`

Инициализирует интерфейс, приводит устройство в состояние "по умолчанию". При этом рабочий диапазон значений энкодера устанавливается [0-255], значение энкодера при старте - 0, шаг изменения - 1, режим - "внутри диапазона".
Вызовите этот метод до начала взаимодействия с RGBEncoder. Например в функции `setup()`.

- `wire`: выбираемый интерейс i2c. При вызове без параметра - аппаратный интерфейс `Wire`.

### `void changeAddr(uint8_t newAddress)`

Изменяет адрес устройства на шине i2c на указанный но не сохраняет его в EEPROM.

- `newAddress`: новое значение адреса.

### `void saveAddr(void)`

Сохраняет текущий адрес устройства в EEPROM.

### `void setValue(int32_t value)`

Принудительно устанавливает текущее значение энкодера. Если это значение выходит за пределы рабочего диапазона оно преобразуется в крайнее значение рабочего диапазона.

- `value`: устанавливаемое значение энкодера [−2147483648;2147483647] должно быть в пределах диапазона установленного командой `setRange`. 

### `void setRange(int32_t min, int32_t max)`

Задает границы рабочего диапазона значений энкодера. Если текущее значение выходит за пределы рабочего диапазона оно преобразуется в крайнее значение рабочего диапазона.

- `min`: нижняя граница рабочего диапазона энкодера [−2147483648;2147483647]. 
- `max`: верхняя граница рабочего диапазона энкодера [−2147483648;2147483647]. 

### `void setStep(int32_t step)`

Задает шаг изменения значения энкодера.

- `step`: шаг изменения значения энкодера. 

### `void setMode(enum EncoderMode mode)`

Задает режим работы энкодера - с упором в границы диапазона или циклический.

- `mode`: устанавливаемый режим работы энкодера, может принимать значения `RGBENC_CLAMP` или `RGBENC_WRAP`. 

### `void update()`

Синхронизирует состояние энкодера. Разместите вызов этой функции в `loop()`.

### `void setColor(uint8_t red, uint8_t green, uint8_t blue)`

Устанавливает цвет подсветки вала энкодера исходя из трех цветовых составляющих:

- `red`: [0-255] яркость красного светодиода.
- `green`: [0-255] яркость зеленого светодиода.
- `blue`: [0-255] яркость синего светодиода.

### `bool isButtonPressed() const`

Возвращает текущее состояние кнопки с учетом подавления дребезга

### `int32_t getEncoderValue() const`

Возвращает текущее значение энкодера

### `void onButton(void (*buttonHandler)(bool state))`

Регистрирует функцию - обработчик событий от кнопки

### `void onEncoder(void (*encoderHandler)(int32_t value))`

Регистрирует функцию-обработчик событий от энкодера. Функция обработчик вызывается в момент получения изменений и получает текущее значение. энкодера.

### `void onStepLeft(void (*stepLeftHandler)())`

Регистрирует функцию - обработчик событий от энкодера. Вызывается для каждого шага при вращении влево.

### `void onStepRight(void (*stepRightHandler)())`

Регистрирует функцию - обработчик событий от энкодера. Вызывается для каждого шага при вращении вправо.

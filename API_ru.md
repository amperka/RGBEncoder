# RGBEncoder API (RUS)

## `class RGBEncoder`

Создайте объект типа `RGBEncoder` для работы с многофункциональным модулем [RGBEncoder](https://my.amperka.com/modules/RGBEncoder).
Модуль представляет собой энкодер вращения, кнопку (при нажатии на вал энкодера) с RGB подсветкой вала энкодера.

### `RGBEncoder(uint8_t i2cAddress = 42)`

Создает новый объект `RGBEncoder`, использующий аппаратный i2c.

- `i2cAddress`: адрес устройства на шине i2c. При вызове без параметра, его значение подразумевается равным 42.


### `void begin()`

Инициализирует интерфейс, приводит устройство в состояние "по умолчанию". При этом рабочий диапазон значений энкодера устанавливается [0-255], значение энкодера при старте - 0, шаг изменения - 1, режим - "внутри диапазона".
Вызовите этот метод до начала взаимодействия с RGBEncoder. Например в функции `setup()`.

### `void changeAddress(uint8_t newAddress)`

Изменяет адрес устройства на шине i2c и рестартует устройство с новым адресом.

- `newAddress`: новое значение адреса.

### `void setValue(int32_t value)`

Принудительно устанавливает текущее значение энкодера. Если это значение выходит за пределы рабочего диапазона оно преобразуется в крайнее значение рабочего диапазона.

- `value`: устанавливаемое значение энкодера. 

### `void setRange(int32_t min, int32_t max)`

Задает границы рабочего диапазона значений энкодера. Если текущее значение выходит за пределы рабочего диапазона оно преобразуется в крайнее значение рабочего диапазона.

- `min`: нижняя граница рабочего диапазона энкодера. 
- `max`: верхняя граница рабочего диапазона энкодера. 

### `void setStep(int32_t step)`

Задает шаг изменения значения энкодера.

- `step`: шаг изменения значения энкодера. 

### `void setMode(EncoderMode mode)`

Задает режим работы энкодера - с упором в границы диапазона или циклический.

- `mode`: устанавливаемый режим работы энкодера, может принимать значения INBOUND или CYCLIC. 

### `void update()`

Синхронизирует состояние энкодера. Разместите вызов этой функции в `loop()`.

### `void setColor(uint8_t r, uint8_t g, uint8_t b)`

Устанавливает цвет подсветки вала энкодера исходя из трех цветовых составляющих:

- `r`: [0-255] яркость красного светодиода.
- `g`: [0-255] яркость зеленого светодиода.
- `b`: [0-255] яркость синего светодиода.



**Для кнопки и энкодера имеется два интерфейса: прямой доступ и псевдо-асинхронный.**

Интерфейс прямого доступа:

### `bool getButtonState()`

Возвращает текущее состояние кнопки с учетом подавления дребезга

### `int32_t getEncoderValue()`

Возвращает текущее значение энкодера

- Псевдо-асинхронный интерфейс:

### `void onButton(void (*)(bool state) buttonHandler)`

Регистрирует функцию - обработчик событий от кнопки

### `void onEncoder(void (*)(int32_t value) encoderHandler)`

Реристрирует функцию - обработчик событий от энкодера
